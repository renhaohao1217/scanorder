# 小程序功能描述

## 首页

### · 登录

### · 注册

### · 扫码

## 我的

### · 用户信息

1. 修改用户信息的时候，在输入框失去焦点的时候通过`event.detail.value`获取输入框的值，然后对值进行格式的校验，比`bindinput`事件触发的次数少
2. 通过`wx.getLocation API `获取用户的地理位置，返回值是经度和纬度，然后通过第三方的工具进行经纬度逆解析得到用户的位置信息 
3. 通过hash值来记录哪些用户信息进行了修改，然后在保存修改的时候，只更新这些修改了的数据，减少了数据库的操作

### · 报表

### · 修改密码

### · 退出登录

通过`wx.removeStorage`删除`_id`标识，退出到登录页面

## 点餐

> 点餐界面有 桌位号点餐`table` 和 流水号点餐`serial` 两个选项，通过路由传参的方法传递给 `business`页面

1. 商家通过 `wx.getStorageSync('_id')`获取`_id`，然后获得商品分类信息，根据商品分类信息获得对应的商品信息
2. 商品信息通过 商品信息集合(so_goods)和购物车集合(so_cart) 联表查询获得每个商品的信息和是否加入购物车的情况
3. 商品列表和购物车信息的同步是通过组件间通信实现的，父组件通过自定义属性的方式将值传给子组件，子组件通过`this.triggerEvent`触发自定义事件的方式将值传给父组件
4. 用户添加购物车和数量的修改事件进行了防抖处理，避免用户频繁点击，然后频繁操作数据库，在用户停止点击300ms之后在将购物车信息更新到数据库中

